---

# Bank Simulation with SFML

## Описание

Это визуальная симуляция работы банка, реализованная на C++ с использованием библиотеки SFML и стандартной многопоточности. Приложение моделирует поведение клиентов, приходящих в банк, и их обслуживание несколькими кассирами с разными специализациями. Клиенты генерируются с использованием пуассоновского распределения, а скорость обслуживания задаётся параметром μ.

---

## Возможности

* Генерация клиентов с пуассоновским распределением (λ)
* Несколько работников банка с разными специализациями: вклад, снятие, кредит, запрос, универсальный
* Отдельное окно статистики с расширенными метриками
* Многопоточность: отдельные потоки для генерации клиентов и обработки
* Управление параметрами в реальном времени:

  * Изменение λ (скорость прихода клиентов)
  * Изменение μ (скорость обслуживания)
* Кнопка сброса (Reset) — завершает потоки и очищает данные без зависаний
* Ведение логов с возможностью прокрутки
* Удобный графический интерфейс (SFML) с элементами управления

---

## Установка и запуск

### Требования

* C++17 или новее
* SFML 2.5.x
* CMake (опционально)
* make/g++ или другой компилятор с поддержкой потоков

### Сборка через CMake

```bash
git clone https://github.com/vou1k/Coursework-1st-year.git
cd Coursework-1st-year/bank-simulation
mkdir build
cd build
cmake ..
make
./BankSimulation
```

### Альтернативная сборка без CMake

```bash
g++ -std=c++17 main.cpp -lsfml-graphics -lsfml-window -lsfml-system -pthread -o BankSimulation
./BankSimulation
```

---

## Управление

| Кнопка       | Действие                                        |
| ------------ | ----------------------------------------------- |
| Start        | Запускает симуляцию                             |
| Stop         | Останавливает обслуживание клиентов             |
| Reset        | Полный сброс: завершает потоки и очищает данные |
| + / − lambda | Увеличить/уменьшить интенсивность прихода (λ)   |
| + / − mu     | Увеличить/уменьшить скорость обслуживания (μ)   |
| Скроллинг    | Прокрутка логов в главном окне                  |

---

## Параметры λ и μ

### λ (лямбда) — интенсивность потока клиентов

* Определяет среднее **количество клиентов в секунду**.

* Используется пуассоновское распределение, интервалы между клиентами — экспоненциальны.

* Формула интервала между клиентами:

  ```
  interval = -ln(U) / λ
  ```

  где `U` — случайное число от 0 до 1.

* Чем выше λ, тем чаще приходят клиенты.

* Может изменяться во время работы симуляции.

**Примеры:**

* λ = 0.5 → в среднем 1 клиент каждые 2 секунды
* λ = 2.0 → в среднем 2 клиента в секунду

---

### μ (мю) — скорость обслуживания

* Определяет, насколько быстро сотрудники обрабатывают клиентов.

* Также основано на экспоненциальном распределении:

  ```
  service_time = -ln(U) / μ
  ```

* Чем выше μ, тем быстрее обслуживание.

* Можно регулировать динамически.

**Примеры:**

* μ = 1.0 → среднее время обслуживания: 1 секунда
* μ = 0.2 → среднее время обслуживания: 5 секунд

---

### Баланс λ и μ

Для стабильной работы желательно соблюдать условие:

```
μ > λ / количество сотрудников
```

При несоблюдении:

* Очереди растут бесконечно
* Сотрудники перегружены
* Система может "захлебнуться"

---

## Окно статистики

### Общая информация

Это отдельное окно (`sf::RenderWindow`), отображающее ключевые метрики симуляции. Оно обновляется в реальном времени и помогает оценить загруженность и эффективность системы.

### Отображаемые параметры

#### 1. Поток клиентов

* **Poisson λ** — текущее значение λ
* **Avg** — средний интервал между клиентами
* **Last** — интервал между последними двумя клиентами
* **Clients** — общее число пришедших клиентов

#### 2. Финансовая статистика

* **Deposits** — число операций + доход (1% от суммы)
* **Withdrawals** — число операций + доход (2% от суммы)
* **Loans** — число операций + доход (5% от суммы)
* **Inquiries** — число операций + фиксированный доход \$5
* **Total profit** — суммарный доход от всех операций

#### 3. Временные показатели

* **Avg service time** — среднее время обслуживания клиента (сек)
* **Avg wait time** — среднее время ожидания в очереди (сек)

---

## Пример логов

```text
Simulation started.
New client arrived: 1 - Deposit ($100)
Client 1 served by Worker 1
Client 2 arrived: Withdraw ($50)
mu increased to 1.2
...
```

---

## Технические детали

* Генерация клиентов с использованием `std::exponential_distribution`
* Многопоточность на базе `std::thread`
* Синхронизация через `std::mutex` и `std::condition_variable`
* Используются `std::queue`, `std::vector`, `std::atomic`
* Окно статистики построено на SFML и работает независимо

---


